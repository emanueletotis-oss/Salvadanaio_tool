let piggybanks=JSON.parse(localStorage.getItem("piggybanks"))||{};let current=null;const listDiv=document.getElementById("piggy-list");const newBtn=document.getElementById("new-btn");const detail=document.getElementById("detail-screen");const detailTitle=document.getElementById("detail-title");const detailTotal=document.getElementById("detail-total");function save(){localStorage.setItem("piggybanks",JSON.stringify(piggybanks));}function showList(){detail.classList.add("hidden");listDiv.innerHTML="";for(let name in piggybanks){const btn=document.createElement("div");btn.className="piggy";btn.innerText=name;btn.onclick=()=>openPiggy(name);listDiv.appendChild(btn);}}function openPiggy(name){current=name;detailTitle.innerText=name;detailTotal.innerText="Totale: "+piggybanks[name]+" â‚¬";detail.classList.remove("hidden");}newBtn.onclick=()=>{const name=prompt("Nome del salvadanaio:");if(!name)return;piggybanks[name]=0;save();showList();};document.getElementById("add-btn").onclick=()=>{const amount=parseInt(prompt("Quanto vuoi aggiungere?"));if(!isNaN(amount)){piggybanks[current]+=amount;save();openPiggy(current);}};document.getElementById("remove-btn").onclick=()=>{const amount=parseInt(prompt("Quanto vuoi rimuovere?"));if(!isNaN(amount)){piggybanks[current]-=amount;save();openPiggy(current);}};document.getElementById("rename-btn").onclick=()=>{const newName=prompt("Nuovo nome:",current);if(!newName)return;piggybanks[newName]=piggybanks[current];delete piggybanks[current];save();current=newName;openPiggy(current);};document.getElementById("back-btn").onclick=()=>{showList();};showList();